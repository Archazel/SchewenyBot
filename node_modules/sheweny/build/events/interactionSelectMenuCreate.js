"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
async function run(client, interaction) {
    if (!client.selectMenus)
        return;
    const selectMenu = client.selectMenus.find((value) => value.customId.includes(interaction.customId));
    if (!selectMenu)
        return;
    if (selectMenu.before)
        await selectMenu.before(interaction);
    /**
     * Handle inhibitors
     */
    const inhibitors = client.inhibitors?.filter((i) => i.type.includes("SELECT_MENU") || i.type.includes("ALL"));
    if (inhibitors && inhibitors.size) {
        const sorted = [...inhibitors.values()].sort((a, b) => b.priority - a.priority);
        for (const i of sorted) {
            if (!i.execute(client, interaction))
                return i.onFailure(client, interaction);
        }
    }
    try {
        await selectMenu.execute(interaction);
    }
    catch (e) {
        console.error(e);
    }
}
exports.default = run;
